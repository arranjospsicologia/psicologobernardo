const navMenu = document.getElementById('nav-menu');
const navToggle = document.getElementById('nav-toggle');
const navClose = document.getElementById('nav-close');
if (navToggle) {
  navToggle.addEventListener('click', () => {
    navMenu.classList.add('show-menu');
  });
}
if (navClose) {
  navClose.addEventListener('click', () => {
    navMenu.classList.remove('show-menu');
  });
}
const navLinks = document.querySelectorAll('.nav-link');
navLinks.forEach(link => {
  link.addEventListener('click', () => {
    navMenu.classList.remove('show-menu');
  });
});
function scrollHeader() {
  const header = document.getElementById('header');
  if (window.scrollY >= 50) {
    header.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';
  } else {
    header.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.08)';
  }
}
window.addEventListener('scroll', scrollHeader);
const sections = document.querySelectorAll('section[id]');
function scrollActive() {
  const scrollY = window.pageYOffset;
  sections.forEach(current => {
    const sectionHeight = current.offsetHeight;
    const sectionTop = current.offsetTop - 100;
    const sectionId = current.getAttribute('id');
    if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
      document.querySelector('.nav-link[href*=' + sectionId + ']')?.classList.add('active');
    } else {
      document.querySelector('.nav-link[href*=' + sectionId + ']')?.classList.remove('active');
    }
  });
}
window.addEventListener('scroll', scrollActive);
function initializeFAQ() {
  const faqItems = document.querySelectorAll('.faq-item');
  faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    if (question) {
      question.addEventListener('click', () => {
        const isActive = item.classList.contains('active');
        faqItems.forEach(faq => faq.classList.remove('active'));
        if (!isActive) {
          item.classList.add('active');
        }
      });
    }
  });
}
document.addEventListener('DOMContentLoaded', initializeFAQ);
function initializeSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const headerHeight = document.getElementById('header').offsetHeight;
        const targetPosition = target.offsetTop - headerHeight;
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
}
document.addEventListener('DOMContentLoaded', initializeSmoothScroll);
function initializeScrollReveal() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);
  const animatedElements = document.querySelectorAll('.feature-card, .servico-card, .projeto-card, .faq-item, .info-card');
  animatedElements.forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });
}
document.addEventListener('DOMContentLoaded', initializeScrollReveal);
window.addEventListener('load', () => {
  document.body.classList.remove('page-loading');
  document.body.classList.add('page-loaded');
});
document.addEventListener('DOMContentLoaded', () => {
  document.body.classList.add('page-loading');
  const internalLinks = document.querySelectorAll('a[href]');
  internalLinks.forEach(link => {
    const href = link.getAttribute('href');
    if (!href || href.startsWith('#') || href.startsWith('http') || href.includes('wa.me') || href.includes('mailto:')) {
      return;
    }
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const target = link.href;
      document.body.classList.add('page-transitioning');
      setTimeout(() => {
        window.location.href = target;
      }, 300); // Mesmo tempo da transição CSS
    });
  });
});
function initializeForms() {
  const forms = document.querySelectorAll('form');
  forms.forEach(form => {
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = Object.fromEntries(formData);
      console.log('Form data:', data);
    });
  });
}
document.addEventListener('DOMContentLoaded', initializeForms);
function initializeWhatsAppTracking() {
  const whatsappButtons = document.querySelectorAll('a[href*="wa.me"]');
  whatsappButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'click', {
          'event_category': 'WhatsApp',
          'event_label': 'Contato via WhatsApp'
        });
      }
      console.log('WhatsApp click tracked');
    });
  });
}
document.addEventListener('DOMContentLoaded', initializeWhatsAppTracking);
function initializeLazyLoading() {
  if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src || img.src;
          img.classList.add('loaded');
          imageObserver.unobserve(img);
        }
      });
    });
    const images = document.querySelectorAll('img[loading="lazy"]');
    images.forEach(img => imageObserver.observe(img));
  }
}
document.addEventListener('DOMContentLoaded', initializeLazyLoading);
function updateCopyrightYear() {
  const currentYear = new Date().getFullYear();
  const copyrightElements = document.querySelectorAll('.footer-bottom p');
  copyrightElements.forEach(el => {
    el.innerHTML = el.innerHTML.replace('2025', currentYear);
  });
}
document.addEventListener('DOMContentLoaded', updateCopyrightYear);
function initializeSocialShare() {
  const currentUrl = encodeURIComponent(window.location.href);
  const pageTitle = encodeURIComponent(document.title);
  const shareContainer = document.querySelector('.post-share');
  if (shareContainer) {
    const facebookBtn = shareContainer.querySelector('a[aria-label*="Facebook"]');
    const twitterBtn = shareContainer.querySelector('a[aria-label*="Twitter"]');
    const linkedinBtn = shareContainer.querySelector('a[aria-label*="LinkedIn"]');
    const whatsappBtn = shareContainer.querySelector('a[aria-label*="WhatsApp"]');
    if (facebookBtn) {
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${currentUrl}`;
    }
    if (twitterBtn) {
      twitterBtn.href = `https://twitter.com/intent/tweet?url=${currentUrl}&text=${pageTitle}`;
    }
    if (linkedinBtn) {
      linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${currentUrl}`;
    }
    if (whatsappBtn) {
      whatsappBtn.href = `https://wa.me/?text=${pageTitle}%20-%20${currentUrl}`;
    }
  }
}
document.addEventListener('DOMContentLoaded', initializeSocialShare);
function initializeConsultorioCarousel() {
  const carousel = document.querySelector('.consultorio-carousel');
  if (!carousel) {
    console.log('Carrossel não encontrado na página');
    return;
  }
  console.log('Carrossel encontrado, inicializando...');
  const track = carousel.querySelector('.carousel-track');
  const slides = carousel.querySelectorAll('.carousel-slide');
  const prevBtn = carousel.querySelector('.carousel-prev');
  const nextBtn = carousel.querySelector('.carousel-next');
  const dots = carousel.querySelectorAll('.carousel-dot');
  console.log(`Total de slides: ${slides.length}`);
  console.log(`Botão prev: ${prevBtn ? 'encontrado' : 'NÃO encontrado'}`);
  console.log(`Botão next: ${nextBtn ? 'encontrado' : 'NÃO encontrado'}`);
  console.log(`Dots: ${dots.length} encontrados`);
  let currentSlide = 0;
  const totalSlides = slides.length;
  function updateCarousel() {
    console.log(`Atualizando carrossel - slide atual: ${currentSlide}`);
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    slides[currentSlide].classList.add('active');
    dots[currentSlide].classList.add('active');
  }
  function nextSlide() {
    console.log('Clicou em próximo');
    currentSlide = (currentSlide + 1) % totalSlides;
    updateCarousel();
  }
  function prevSlide() {
    console.log('Clicou em anterior');
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    updateCarousel();
  }
  function goToSlide(index) {
    console.log(`Indo para slide ${index}`);
    currentSlide = index;
    updateCarousel();
  }
  if (nextBtn) {
    nextBtn.addEventListener('click', nextSlide);
    console.log('Event listener adicionado ao botão next');
  }
  if (prevBtn) {
    prevBtn.addEventListener('click', prevSlide);
    console.log('Event listener adicionado ao botão prev');
  }
  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => goToSlide(index));
  });
  console.log(`Event listeners adicionados aos ${dots.length} dots`);
  updateCarousel();
  console.log('Carrossel inicializado com sucesso!');
  document.addEventListener('keydown', (e) => {
    const carouselRect = carousel.getBoundingClientRect();
    const isVisible = carouselRect.top < window.innerHeight && carouselRect.bottom > 0;
    if (isVisible) {
      if (e.key === 'ArrowLeft') {
        prevSlide();
      } else if (e.key === 'ArrowRight') {
        nextSlide();
      }
    }
  });
  let touchStartX = 0;
  let touchEndX = 0;
  carousel.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });
  carousel.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  }, { passive: true });
  function handleSwipe() {
    const swipeThreshold = 50; // Mínimo de pixels para considerar um swipe
    if (touchEndX < touchStartX - swipeThreshold) {
      nextSlide();
    }
    if (touchEndX > touchStartX + swipeThreshold) {
      prevSlide();
    }
  }
}
document.addEventListener('DOMContentLoaded', initializeConsultorioCarousel);