/* Psicólogo Bernardo - Main JS - Minified with Terser */
!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("nav-menu"),t=document.getElementById("nav-toggle"),n=document.getElementById("nav-close");t&&e&&t.addEventListener("click",()=>{e.classList.add("show-menu")},{passive:!0}),n&&e&&n.addEventListener("click",()=>{e.classList.remove("show-menu")},{passive:!0}),e&&document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("show-menu")},{passive:!0})})});const e=document.getElementById("header");let t=null,n=!1;window.addEventListener("scroll",function(){const a=window.pageYOffset||document.documentElement.scrollTop||0;n||(n=!0,requestAnimationFrame(()=>{!function(n){if(!e)return;const a=n>=50;t!==a&&(t=a,e.style.boxShadow=a?"0 4px 12px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.08)")}(a),n=!1}))},{passive:!0}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".nav-link");e.forEach(t=>{t.addEventListener("click",function(){e.forEach(e=>e.classList.remove("active")),this.classList.add("active")},{passive:!0})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".faq-item");e.forEach(t=>{const n=t.querySelector(".faq-question");n&&n.addEventListener("click",()=>{const n=t.classList.contains("active");e.forEach(e=>e.classList.remove("active")),n||t.classList.add("active")})})});let a=72;document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("header");let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{requestAnimationFrame(()=>{e&&(a=e.offsetHeight)})},250)},{passive:!0}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&requestAnimationFrame(()=>{const e=t.getBoundingClientRect().top+window.pageYOffset-a;window.scrollTo({top:e,behavior:"smooth"})})})})}),document.addEventListener("DOMContentLoaded",function(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".feature-card, .servico-card, .projeto-card, .faq-item, .info-card").forEach(t=>{t.style.opacity="0",t.style.transform="translateY(30px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease",e.observe(t)})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href*="wa.me"]').forEach(e=>{e.addEventListener("click",()=>{"undefined"!=typeof gtag&&gtag("event","click",{event_category:"WhatsApp",event_label:"Contato via WhatsApp"});try{console.log("WhatsApp click tracked")}catch(e){}},{passive:!0})})}),document.addEventListener("DOMContentLoaded",function(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src||n.src,n.classList.add("loaded"),e.unobserve(n)}})});document.querySelectorAll('img[loading="lazy"]').forEach(t=>e.observe(t))}}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".hero-img-lazy");e&&(e.complete?e.classList.add("loaded"):e.addEventListener("load",function(){e.classList.add("loaded")}))}),document.addEventListener("DOMContentLoaded",function(){const e=(new Date).getFullYear();document.querySelectorAll(".footer-bottom p").forEach(t=>{t.innerHTML=t.innerHTML.replace(/\b20\d{2}\b/,e.toString())})}),document.addEventListener("DOMContentLoaded",function(){const e=encodeURIComponent(window.location.href),t=encodeURIComponent(document.title),n=document.querySelector(".post-share");if(!n)return;const a=n.querySelector('a[aria-label*="Facebook"]'),o=n.querySelector('a[aria-label*="Twitter"]'),i=n.querySelector('a[aria-label*="LinkedIn"]'),s=n.querySelector('a[aria-label*="WhatsApp"]');a&&(a.href=`https://www.facebook.com/sharer/sharer.php?u=${e}`),o&&(o.href=`https://twitter.com/intent/tweet?url=${e}&text=${t}`),i&&(i.href=`https://www.linkedin.com/sharing/share-offsite/?url=${e}`),s&&(s.href=`https://wa.me/?text=${t}%20-%20${e}`)}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".consultorio-carousel");if(!e)return;e.querySelector(".carousel-track");const t=e.querySelectorAll(".carousel-slide"),n=e.querySelector(".carousel-prev"),a=e.querySelector(".carousel-next"),o=e.querySelectorAll(".carousel-dot");let i=0;const s=t.length;function r(){t.forEach(e=>e.classList.remove("active")),o.forEach(e=>e.classList.remove("active")),t[i].classList.add("active"),o[i].classList.add("active")}function c(){i=(i+1)%s,r()}function d(){i=(i-1+s)%s,r()}a&&a.addEventListener("click",c,{passive:!0}),n&&n.addEventListener("click",d,{passive:!0}),o.forEach((e,t)=>e.addEventListener("click",()=>function(e){i=e,r()}(t),{passive:!0})),r(),document.addEventListener("keydown",t=>{const n=e.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&("ArrowLeft"===t.key?d():"ArrowRight"===t.key&&c())});let l=0,u=0;e.addEventListener("touchstart",e=>{l=e.changedTouches[0].screenX},{passive:!0}),e.addEventListener("touchend",e=>{u=e.changedTouches[0].screenX,u<l-50&&c(),u>l+50&&d()},{passive:!0})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("cookie-banner"),t=document.getElementById("cookie-accept");e&&t&&(localStorage.getItem("cookiesAccepted")||setTimeout(()=>{e.classList.add("show")},1e3),t.addEventListener("click",()=>{localStorage.setItem("cookiesAccepted","true"),e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)},{passive:!0}))}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("filter-dropdown-btn"),t=document.getElementById("filter-dropdown-menu"),n=document.querySelectorAll(".filter-option"),o=document.getElementById("current-filter-label"),i=document.querySelectorAll(".blog-card");e&&t&&n.length&&(e.addEventListener("click",n=>{n.stopPropagation(),e.classList.toggle("active"),t.classList.toggle("active")}),document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||(e.classList.remove("active"),t.classList.remove("active"))}),n.forEach(s=>{s.addEventListener("click",()=>{const r=s.getAttribute("data-tag"),c=s.querySelector("span").textContent;n.forEach(e=>e.classList.remove("active")),s.classList.add("active"),o.textContent=c,e.classList.remove("active"),t.classList.remove("active"),i.forEach(e=>{const t=e.getAttribute("data-tags");e.style.display="todos"===r||t&&t.includes(r)?"block":"none"}),setTimeout(()=>{i.forEach(e=>{"block"===e.style.display&&(e.style.opacity="1",e.style.transform="translateY(0)")})},50);const d=document.querySelector(".blog-grid");d&&requestAnimationFrame(()=>{const e=a||(document.getElementById("header")?document.getElementById("header").offsetHeight:0),t=d.getBoundingClientRect().top+window.pageYOffset-e-20;window.scrollTo({top:t,behavior:"smooth"})}),void 0!==window.blogPagination&&window.blogPagination.refresh()})}),i.forEach(e=>{e.style.transition="opacity 0.3s ease, transform 0.3s ease"}),window.getActiveFilter=()=>{const e=document.querySelector(".filter-option.active");return e?e.getAttribute("data-tag"):"todos"})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("blog-search-input"),t=document.getElementById("clear-search"),n=document.getElementById("search-results-count"),a=document.querySelectorAll(".blog-card");if(!e||!t||!n)return;let o="";function i(){e.value="",o="",t.style.display="none",n.style.display="none",a.forEach(e=>{e.removeAttribute("data-search-match")}),window.blogPagination&&window.blogPagination.refresh()}e.addEventListener("input",function(){if(o=e.value.toLowerCase().trim(),""===o){t.style.display="none",n.style.display="none";const e=document.querySelector('.filter-option[data-tag="todos"]');return void(e&&e.click())}t.style.display="flex";let i=0;a.forEach(e=>{(e.getAttribute("data-title")||"").toLowerCase().includes(o)?(e.setAttribute("data-search-match","true"),i++):e.setAttribute("data-search-match","false")}),n.style.display="block",n.textContent=0===i?"Nenhum post encontrado":`${i} post${i>1?"s":""} encontrado${i>1?"s":""}`,window.blogPagination&&window.blogPagination.refresh()}),e.addEventListener("keyup",e=>{"Escape"===e.key&&i()}),t.addEventListener("click",i),window.blogSearch={isActive:()=>""!==o,getTerm:()=>o}}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".blog-card"),t=document.getElementById("prev-page"),n=document.getElementById("next-page"),o=document.getElementById("pagination-numbers"),i=document.getElementById("blog-pagination");if(!(e.length&&t&&n&&i))return;let s=1;function r(){const t=window.getActiveFilter?window.getActiveFilter():"todos",n=window.blogSearch&&window.blogSearch.isActive();return Array.from(e).filter(e=>{if(n&&"true"!==e.getAttribute("data-search-match"))return!1;if("todos"===t)return!0;const a=e.getAttribute("data-tags");return a&&a.includes(t)})}function c(d,l=!0){const u=r(),v=Math.ceil(u.length/6);d<1&&(d=1),d>v&&(d=v),0===v&&(d=1),s=d,e.forEach(e=>{e.style.display="none"});const m=6*(d-1),g=m+6;for(let e=m;e<g&&e<u.length;e++){const t=u[e];t.style.display="flex",t.style.opacity="1",t.style.transform="translateY(0)"}if(function(e){t.disabled=1===s,n.disabled=s===e||0===e;const a=function(e){if(e<=1)return[];const t=[];if(e>6){t.push(1),s>3&&t.push("...");for(let n=Math.max(2,s-1);n<=Math.min(e-1,s+1);n++)t.includes(n)||t.push(n);s<e-2&&t.push("..."),e>1&&t.push(e)}else for(let n=1;n<=e;n++)t.push(n);return t}(e);o.innerHTML="",a.forEach(e=>{if("..."===e){const e=document.createElement("span");e.className="pagination-ellipsis",e.textContent="...",o.appendChild(e)}else{const t=document.createElement("button");t.className="pagination-number",t.setAttribute("data-page",e),t.textContent=e,e===s&&t.classList.add("active"),t.addEventListener("click",()=>c(e),{passive:!0}),o.appendChild(t)}}),i.style.display=e<=1?"none":"flex"}(v),l){const e=document.querySelector(".blog-section");e&&requestAnimationFrame(()=>{const t=a||(document.getElementById("header")?document.getElementById("header").offsetHeight:0),n=e.getBoundingClientRect().top+window.pageYOffset-t-20;window.scrollTo({top:n,behavior:"smooth"})})}}t&&t.addEventListener("click",()=>{s>1&&c(s-1)},{passive:!0}),n&&n.addEventListener("click",()=>{const e=r(),t=Math.ceil(e.length/6);s<t&&c(s+1)},{passive:!0}),c(1,!1),window.blogPagination={goToPage:c,refresh:()=>c(1,!1),currentPage:()=>s}}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("reviews-container");e&&new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(fetch("/assets/data/reviews.json").then(e=>e.json()).then(e=>{const t=document.getElementById("reviews-container");if(!t)return;const n=()=>window.innerWidth>768?2:1;let a=0,o=n();t.innerHTML='\n          <div class="reviews-widget">\n            <div class="reviews-widget-header">\n              <img src="https://cdn.trustindex.io/assets/platform/Google/icon.svg" alt="Google" class="google-logo">\n              <span class="reviews-title">Avaliações</span>\n              <div class="reviews-rating">\n                <span class="rating-number">5.0</span>\n                <div class="rating-stars">★★★★★</div>\n              </div>\n            </div>\n            <div class="reviews-carousel" id="reviews-carousel"></div>\n            <div class="reviews-nav">\n              <button class="review-nav-btn" id="review-prev" aria-label="Review anterior"><i class="fas fa-chevron-left"></i></button>\n              <div class="review-indicators" id="review-indicators"></div>\n              <button class="review-nav-btn" id="review-next" aria-label="Próximo review"><i class="fas fa-chevron-right"></i></button>\n            </div>\n          </div>\n        ';const i=document.getElementById("reviews-carousel"),s=document.getElementById("review-indicators"),r=document.getElementById("review-prev"),c=document.getElementById("review-next");function d(){o=n(),i.innerHTML="";const t=1===o?"100%":`calc((100% - 1.5rem) / ${o})`;e.forEach((e,n)=>{const a="★".repeat(e.rating)+"☆".repeat(5-e.rating),{truncated:o,isTruncated:s,full:r}=function(e,t=150){return e.length<=t?{truncated:e,isTruncated:!1}:{truncated:e.substring(0,t).trim()+"...",isTruncated:!0,full:e}}(e.text),c=document.createElement("div");if(c.className="review-card",c.style.flex=`0 0 ${t}`,c.style.maxWidth=t,c.innerHTML=`\n              <div class="review-header">\n                <img src="https://cdn.trustindex.io/assets/platform/Google/icon.svg" alt="Google" class="review-google-icon">\n                <img src="${e.photo}" alt="${e.name}" class="review-avatar" onerror="this.src='https://via.placeholder.com/40'">\n                <div class="review-author">\n                  <div class="review-name">${e.name}</div>\n                  <div class="review-date">${e.date}</div>\n                </div>\n              </div>\n              <div class="review-stars">${a}</div>\n              <div class="review-text-container">\n                <p class="review-text">${o}</p>\n                ${s?'<button class="read-more-btn" data-expanded="false">Leia mais</button>':""}\n              </div>\n            `,s){const e=c.querySelector(".read-more-btn"),t=c.querySelector(".review-text");e.addEventListener("click",()=>{"true"===e.getAttribute("data-expanded")?(t.textContent=o,e.textContent="Leia mais",e.setAttribute("data-expanded","false")):(t.textContent=r,e.textContent="Leia menos",e.setAttribute("data-expanded","true"))})}i.appendChild(c)}),l()}function l(){const t=-100*a;i.style.transform=`translateX(${t}%)`,function(){const t=Math.ceil(e.length/o);r.disabled=0===a,c.disabled=a>=t-1}(),function(){const t=Math.ceil(e.length/o);s.innerHTML="";for(let e=0;e<t;e++){const t=document.createElement("span");t.className="review-dot"+(e===a?" active":""),t.setAttribute("aria-label",`Página ${e+1}`),s.appendChild(t)}}()}let u;r.addEventListener("click",()=>{a>0&&(a--,l())},{passive:!0}),c.addEventListener("click",()=>{const t=Math.ceil(e.length/o);a<t-1&&(a++,l())},{passive:!0}),window.addEventListener("resize",()=>{clearTimeout(u),u=setTimeout(()=>{n()!==o&&(a=0,d())},250)},{passive:!0}),document.addEventListener("keydown",e=>{if(!t)return;const n=t.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&("ArrowLeft"===e.key?r.click():"ArrowRight"===e.key&&c.click())});let v=0,m=0;i.addEventListener("touchstart",e=>{v=e.changedTouches[0].screenX},{passive:!0}),i.addEventListener("touchend",e=>{m=e.changedTouches[0].screenX,m<v-50&&c.click(),m>v+50&&r.click()},{passive:!0}),d()}).catch(e=>{console.error("Erro ao carregar avaliações:",e);const t=document.getElementById("reviews-container");t&&(t.innerHTML='<p style="text-align: center; color: #666;">Erro ao carregar avaliações. Tente novamente mais tarde.</p>')}),t.unobserve(e.target))})},{rootMargin:"200px"}).observe(e)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("doctoralia-reviews-container");e&&new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(fetch("assets/data/doctoralia-reviews.json").then(e=>e.json()).then(e=>{const t=document.getElementById("doctoralia-reviews-container");if(!t)return;let n=0;t.innerHTML='\n          <div class="doctoralia-widget">\n            <div class="doctoralia-widget-header">\n              <img src="assets/images/doctoralia-logo.png" alt="Doctoralia" class="doctoralia-logo-small" width="100" height="100">\n              <div class="doctoralia-header-info">\n                <span class="doctoralia-title">Avaliações</span>\n                <div class="doctoralia-rating-summary">\n                  <span class="rating-number">5.0</span>\n                  <div class="rating-stars-green">★★★★★</div>\n                </div>\n              </div>\n            </div>\n            <div class="doctoralia-carousel" id="doctoralia-carousel"></div>\n            <div class="doctoralia-nav">\n              <button class="doctoralia-nav-btn" id="doctoralia-prev" aria-label="Review anterior"><i class="fas fa-chevron-left"></i></button>\n              <div class="doctoralia-indicators" id="doctoralia-indicators"></div>\n              <button class="doctoralia-nav-btn" id="doctoralia-next" aria-label="Próximo review"><i class="fas fa-chevron-right"></i></button>\n            </div>\n            <a href="https://www.doctoralia.com.br/bernardo-carielo-macedo-de-oliveira-pinto/psicologo/vitoria?utm_id=379142&utm_source=widget-doctor-379142&utm_medium=big-with-opinion&utm_campaign=&utm_content=#profile-reviews"\n               class="doctoralia-cta-link" target="_blank" rel="noopener">Ver todas as 65 avaliações</a>\n          </div>\n        ';const a=document.getElementById("doctoralia-carousel"),o=document.getElementById("doctoralia-indicators"),i=document.getElementById("doctoralia-prev"),s=document.getElementById("doctoralia-next");function r(){a.querySelectorAll(".doctoralia-review-card").forEach((e,t)=>{e.style.display=t===n?"flex":"none"}),function(){const t=Math.ceil(e.length/1);i.disabled=0===n,s.disabled=n>=t-1}(),function(){const t=Math.ceil(e.length/1);o.innerHTML="";for(let e=0;e<t;e++){const t=document.createElement("span");t.className="doctoralia-dot"+(e===n?" active":""),t.setAttribute("aria-label",`Página ${e+1}`),o.appendChild(t)}}()}i.addEventListener("click",()=>{n>0&&(n--,r())},{passive:!0}),s.addEventListener("click",()=>{const t=Math.ceil(e.length/1);n<t-1&&(n++,r())},{passive:!0}),document.addEventListener("keydown",e=>{if(!t)return;const n=t.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&("ArrowLeft"===e.key?i.click():"ArrowRight"===e.key&&s.click())});let c=0,d=0;a.addEventListener("touchstart",e=>{c=e.changedTouches[0].screenX},{passive:!0}),a.addEventListener("touchend",e=>{d=e.changedTouches[0].screenX,d<c-50&&s.click(),d>c+50&&i.click()},{passive:!0}),a.innerHTML="",e.forEach((e,t)=>{const n="★".repeat(e.rating),{truncated:o,isTruncated:i,full:s}=function(e,t=150){return e.length<=t?{truncated:e,isTruncated:!1}:{truncated:e.substring(0,t).trim()+"...",isTruncated:!0,full:e}}(e.text),r=document.createElement("div");if(r.className="doctoralia-review-card",r.style.display=0===t?"flex":"none",r.innerHTML=`\n              <div class="doctoralia-review-header">\n                <div class="doctoralia-avatar">${e.initial}</div>\n                <div class="doctoralia-author">\n                  <div class="doctoralia-name">${e.name}</div>\n                  <div class="doctoralia-date">${e.date}</div>\n                </div>\n              </div>\n              <div class="doctoralia-stars-green">${n}</div>\n              <div class="doctoralia-text-container">\n                <p class="doctoralia-text">${o}</p>\n                ${i?'<button class="doctoralia-read-more-btn" data-expanded="false">Leia mais</button>':""}\n              </div>\n            `,i){const e=r.querySelector(".doctoralia-read-more-btn"),t=r.querySelector(".doctoralia-text");e.addEventListener("click",()=>{"true"===e.getAttribute("data-expanded")?(t.textContent=o,e.textContent="Leia mais",e.setAttribute("data-expanded","false")):(t.textContent=s,e.textContent="Leia menos",e.setAttribute("data-expanded","true"))})}a.appendChild(r)}),r()}).catch(e=>{console.error("Erro ao carregar avaliações do Doctoralia:",e);const t=document.getElementById("doctoralia-reviews-container");t&&(t.innerHTML='<p style="text-align: center; color: #666;">Erro ao carregar avaliações. Tente novamente mais tarde.</p>')}),t.unobserve(e.target))})},{rootMargin:"200px"}).observe(e)}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".blog-image img, .post-featured-image img, .blog-card img").forEach(e=>{e.addEventListener("error",function(){const e=window.location.pathname.includes("/posts/")?"../assets/images/blog-image-placeholder.jpg":"assets/images/blog-image-placeholder.jpg";this.src.includes("blog-image-placeholder.jpg")||(this.src=e,this.alt="Imagem de postagem do blog")})})})}();